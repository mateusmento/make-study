CC = gcc
CFLAGS = -Iinclude

vpath %.c src
vpath %.h include

SRC = $(wildcard src/*.c)
OBJ = $(patsubst src/%.c,obj/%.o,$(SRC))

bin/main: $(OBJ)
	@mkdir -p bin
	$(LINK.o) -o $@ $^

$(OBJ): obj/%.o: %.c %.h
	@mkdir -p obj
	$(COMPILE.c) -o $@ $<

main.h:
